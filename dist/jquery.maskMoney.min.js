/*
 *  jquery-maskmoney - v3.1.1
 *  jQuery plugin to mask data entry in the input text in the form of money (currency)
 *  https://github.com/plentz/jquery-maskmoney
 *
 *  Made by Diego Plentz
 *  Under MIT License
 */

!function($){"use strict";function a(a,b){var c="";return a.indexOf("-")>-1&&(a=a.replace("-",""),c="-"),a.indexOf(b.prefix)>-1&&(a=a.replace(b.prefix,"")),a.indexOf(b.suffix)>-1&&(a=a.replace(b.suffix,"")),c+b.prefix+a+b.suffix}function b(a,b,e){return b.allowEmpty&&""===a?"":b.reverse?(a=d(a,b),e&&e(a),a):(a=c(a,b),e&&e(a),a)}function c(b,c){var d,f,g,h=b.indexOf("-")>-1&&c.allowNegative?"-":"",i=b.replace(/[^0-9]/g,""),j=i.slice(0,i.length-c.precision);return d=e(j,h,c),c.precision>0&&(f=i.slice(i.length-c.precision),g=new Array(c.precision+1-f.length).join(0),d+=c.decimal+g+f),a(d,c)}function d(b,c){var d,f=b.indexOf("-")>-1&&c.allowNegative?"-":"",g=b.replace(c.prefix,"").replace(c.suffix,""),h=g.split(c.decimal)[0],i="";if(""===h&&(h="0"),d=e(h,f,c),c.precision>0){var j=g.split(c.decimal);j.length>1&&(i=j[1]),d+=c.decimal+i;var k=Number.parseFloat(h+"."+i).toFixed(c.precision),l=k.toString().split(c.decimal)[1];d=d.split(c.decimal)[0]+"."+l}return a(d,c)}function e(a,b,c){return a=a.replace(/^0*/g,""),a=a.replace(/\B(?=(\d{3})+(?!\d))/g,c.thousands),""===a&&(a="0"),b+a}$.browser||($.browser={},$.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),$.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),$.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),$.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()));var f={destroy:function(){return $(this).unbind(".maskMoney"),$.browser.msie&&(this.onpaste=null),this},applyMask:function(a){return b(a,$(this).data("settings"))},mask:function(a){return this.each(function(){var b=$(this);return"number"==typeof a&&b.val(a),b.trigger("mask")})},unmasked:function(){return this.map(function(){var a,b=$(this).val()||"0",c=-1!==b.indexOf("-");return $(b.split(/\D/).reverse()).each(function(b,c){if(c)return a=c,!1}),b=b.replace(/\D/g,""),b=b.replace(new RegExp(a+"$"),"."+a),c&&(b="-"+b),parseFloat(b)})},init:function(c,d){return c=$.extend({prefix:"",suffix:"",affixesStay:!0,thousands:",",decimal:".",precision:2,allowZero:!1,allowNegative:!1,doubleClickSelection:!0,allowEmpty:!1},c),this.each(function(){function e(){var a,b,c,d,e,f=A.get(0),g=0,h=0;return"number"==typeof f.selectionStart&&"number"==typeof f.selectionEnd?(g=f.selectionStart,h=f.selectionEnd):(b=document.selection.createRange())&&b.parentElement()===f&&(d=f.value.length,a=f.value.replace(/\r\n/g,"\n"),c=f.createTextRange(),c.moveToBookmark(b.getBookmark()),e=f.createTextRange(),e.collapse(!1),c.compareEndPoints("StartToEnd",e)>-1?g=h=d:(g=-c.moveStart("character",-d),g+=a.slice(0,g).split("\n").length-1,c.compareEndPoints("EndToEnd",e)>-1?h=d:(h=-c.moveEnd("character",-d),h+=a.slice(0,h).split("\n").length-1))),{start:g,end:h}}function f(){var a=!(A.val().length>=A.attr("maxlength")&&A.attr("maxlength")>=0),b=e(),c=b.start,d=b.end,f=!(b.start===b.end||!A.val().substring(c,d).match(/\d/)),g="0"===A.val().substring(0,1);return a||f||g}function g(a){y.formatOnBlur||A.each(function(b,c){if(c.setSelectionRange)c.focus(),c.setSelectionRange(a,a);else if(c.createTextRange){var d=c.createTextRange();d.collapse(!0),d.moveEnd("character",a),d.moveStart("character",a),d.select()}})}function h(a){var c,e=A.val().length;A.val(b(A.val(),y,d)),c=A.val().length,y.reverse||(a-=e-c),g(a)}function i(){var a=A.val();y.allowEmpty&&""===a||(y.precision>0&&a.indexOf(y.decimal)<0&&(a+=y.decimal+new Array(y.precision+1).join(0)),A.val(b(a,y,d)))}function j(){var a=A.val();return y.allowNegative?""!==a&&"-"===a.charAt(0)?a.replace("-",""):"-"+a:a}function k(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function l(a){a=a||window.event;var b=a.which||a.charCode||a.keyCode,c=y.decimal.charCodeAt(0);return void 0!==b&&(!(b<48||b>57)||b===c&&y.reverse?!!f()&&((b!==c||!m())&&(!!y.formatOnBlur||(k(a),p(a),!1))):q(b,a))}function m(){return!n()&&o()}function n(){var a=A.val().length,b=e();return 0===b.start&&b.end===a}function o(){return A.val().indexOf(y.decimal)>-1}function p(a){a=a||window.event;var b,c,d,f,g=a.which||a.charCode||a.keyCode,i="";g>=48&&g<=57&&(i=String.fromCharCode(g)),b=e(),c=b.start,d=b.end,f=A.val(),A.val(f.substring(0,c)+i+f.substring(d,f.length)),h(c+1)}function q(a,b){return 45===a?(A.val(j()),!1):43===a?(A.val(A.val().replace("-","")),!1):13===a||9===a||(!(!$.browser.mozilla||37!==a&&39!==a||0!==b.charCode)||(k(b),!0))}function r(a){a=a||window.event;var b,c,d,f,g,i=a.which||a.charCode||a.keyCode;return void 0!==i&&(b=e(),c=b.start,d=b.end,8!==i&&46!==i&&63272!==i||(k(a),f=A.val(),c===d&&(8===i?""===y.suffix?c-=1:(g=f.split("").reverse().join("").search(/\d/),c=f.length-g-1,d=c+1):d+=1),A.val(f.substring(0,c)+f.substring(d,f.length)),h(c),!1))}function s(){z=A.val(),i();var a,b=A.get(0);y.selectAllOnFocus?b.select():b.createTextRange&&(a=b.createTextRange(),a.collapse(!1),a.select())}function t(){setTimeout(function(){i()},0)}function u(){return(parseFloat("0")/Math.pow(10,y.precision)).toFixed(y.precision).replace(new RegExp("\\.","g"),y.decimal)}function v(b){if($.browser.msie&&l(b),y.formatOnBlur&&A.val()!==z&&p(b),""===A.val()&&y.allowEmpty)A.val("");else if(""===A.val()||A.val()===a(u(),y))y.allowZero?y.affixesStay?A.val(a(u(),y)):A.val(u()):A.val("");else if(!y.affixesStay){var c=A.val().replace(y.prefix,"").replace(y.suffix,"");A.val(c)}A.val()!==z&&A.change()}function w(){var a,b=A.get(0);y.selectAllOnFocus||(b.setSelectionRange?(a=A.val().length,b.setSelectionRange(a,a)):A.val(A.val()))}function x(){var a,b,c=A.get(0);c.setSelectionRange?(b=A.val().length,a=y.doubleClickSelection?0:b,c.setSelectionRange(a,b)):A.val(A.val())}var y,z,A=$(this);y=$.extend({},c),y=$.extend(y,A.data()),A.data("settings",y),A.unbind(".maskMoney"),A.bind("keypress.maskMoney",l),A.bind("keydown.maskMoney",r),A.bind("blur.maskMoney",v),A.bind("focus.maskMoney",s),A.bind("click.maskMoney",w),A.bind("dblclick.maskMoney",x),A.bind("cut.maskMoney",t),A.bind("paste.maskMoney",t),A.bind("mask.maskMoney",i)})}};$.fn.maskMoney=function(a){return f[a]?f[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void $.error("Method "+a+" does not exist on jQuery.maskMoney"):f.init.apply(this,arguments)}}(window.jQuery||window.Zepto);